module.exports={name:"plugin-auto-install",factory:()=>{let u=require("child_process"),l=require("crypto"),r=require("fs"),o=require("path");function c(n){try{let t=[];for(let e of n.workspaces)t.push(o.join(e.cwd,"package.json"));t.sort();let s=l.createHash("sha256");for(let e of t){let h=r.statSync(e,{throwIfNoEntry:!1});!h||s.update(h.mtimeMs.toString())}return s.update(n.lockFileChecksum),s.digest("hex")}catch{}}function f(n){let t=i(n);return r.readFileSync(o.join(t,"hash"),"utf-8")}function a(n,t){let s=i(t);r.mkdirSync(s,{recursive:!0}),r.writeFileSync(o.join(s,"hash"),n),r.writeFileSync(o.join(s,".gitignore"),"hash")}function i(n){return o.join(n.cwd,".yarn","plugins","plugin-auto-install")}return{hooks:{afterAllInstalled(n){try{let t=c(n);t&&a(t,n)}catch{}},async wrapScriptExecution(n,t){try{let s=c(t);try{if(s&&s===f(t))return n}catch{}console.info("plugin-auto-install detects changes in package.json and/or yarn.lock."),s&&a(s,t),u.spawnSync("yarn",["install"],{env:process.env,stdio:"inherit"})}catch{}return n}}}}};
//# sourceMappingURL=index.cjs.map
